2025-06-18 11:28:34,081 - INFO - üéØ Final V3 vs V4 Conversion Validation Test Initialized
2025-06-18 11:28:34,081 - INFO - üìÅ Test image: /home/fabri/ConvNeXtPose/demo/input.jpg
2025-06-18 11:28:34,082 - INFO - üìÅ PyTorch model: /home/fabri/ConvNeXtPose/exports/model_opt_S.pth
2025-06-18 11:28:34,082 - INFO - üìÅ ONNX model: /home/fabri/ConvNeXtPose/exports/model_opt_S_optimized.onnx
2025-06-18 11:28:34,082 - INFO - üöÄ STARTING FINAL V3 VS V4 CONVERSION VALIDATION
2025-06-18 11:28:34,082 - INFO - ================================================================================
2025-06-18 11:28:34,082 - INFO - 
üîÑ Running: Conversion Validation
2025-06-18 11:28:34,082 - INFO - 
============================================================
2025-06-18 11:28:34,082 - INFO - üß™ TEST 1: Validaci√≥n de Conversi√≥n ONNX‚ÜíTFLite
2025-06-18 11:28:34,082 - INFO - ============================================================
2025-06-18 11:28:34,082 - INFO - üîÑ Testing corrected onnx-tf conversion...
2025-06-18 11:28:34.182722: I tensorflow/core/platform/cpu_feature_guard.cc:193] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations:  AVX2 AVX_VNNI FMA
To enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.
2025-06-18 11:28:34.293386: I tensorflow/core/util/port.cc:104] oneDNN custom operations are on. You may see slightly different numerical results due to floating-point round-off errors from different computation orders. To turn them off, set the environment variable `TF_ENABLE_ONEDNN_OPTS=0`.
2025-06-18 11:28:34.299433: W tensorflow/compiler/xla/stream_executor/platform/default/dso_loader.cc:64] Could not load dynamic library 'libcudart.so.11.0'; dlerror: libcudart.so.11.0: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /home/fabri/ConvNeXtPose/pose_detection_env/lib/python3.10/site-packages/cv2/../../lib64:
2025-06-18 11:28:34.299487: I tensorflow/compiler/xla/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
2025-06-18 11:28:34.804583: W tensorflow/compiler/xla/stream_executor/platform/default/dso_loader.cc:64] Could not load dynamic library 'libnvinfer.so.7'; dlerror: libnvinfer.so.7: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /home/fabri/ConvNeXtPose/pose_detection_env/lib/python3.10/site-packages/cv2/../../lib64:
2025-06-18 11:28:34.804689: W tensorflow/compiler/xla/stream_executor/platform/default/dso_loader.cc:64] Could not load dynamic library 'libnvinfer_plugin.so.7'; dlerror: libnvinfer_plugin.so.7: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /home/fabri/ConvNeXtPose/pose_detection_env/lib/python3.10/site-packages/cv2/../../lib64:
2025-06-18 11:28:34.804696: W tensorflow/compiler/tf2tensorrt/utils/py_utils.cc:38] TF-TRT Warning: Cannot dlopen some TensorRT libraries. If you would like to use Nvidia GPU with TensorRT, please make sure the missing libraries mentioned above are installed properly.
2025-06-18 11:28:35,701 - INFO - ‚úÖ TensorFlow available: 2.11.0
/home/fabri/ConvNeXtPose/pose_detection_env/lib/python3.10/site-packages/tensorflow_addons/utils/tfa_eol_msg.py:23: UserWarning: 

TensorFlow Addons (TFA) has ended development and introduction of new features.
TFA has entered a minimal maintenance and release mode until a planned end of life in May 2024.
Please modify downstream libraries to take dependencies from other repositories in our TensorFlow community (e.g. Keras, Keras-CV, and Keras-NLP). 

For more information see: https://github.com/tensorflow/addons/issues/2807 

  warnings.warn(
/home/fabri/ConvNeXtPose/pose_detection_env/lib/python3.10/site-packages/tensorflow_addons/utils/ensure_tf_install.py:53: UserWarning: Tensorflow Addons supports using Python ops for all Tensorflow versions above or equal to 2.13.0 and strictly below 2.16.0 (nightly versions are not supported). 
 The versions of TensorFlow you are currently using is 2.11.0 and is not supported. 
Some things might work, some things might not.
If you were to encounter a bug, do not file an issue.
If you want to make sure you're using a tested and supported configuration, either change the TensorFlow version or the TensorFlow Addons's version. 
You can find the compatibility matrix in TensorFlow Addon's readme:
https://github.com/tensorflow/addons
  warnings.warn(
2025-06-18 11:28:36,089 - INFO - ‚úÖ onnx-tf available: 1.10.0
2025-06-18 11:28:36,089 - INFO - ‚úÖ ONNX available: 1.13.0
2025-06-18 11:28:36,090 - INFO - üîß Initialized converter with temp dir: /tmp/onnx_tflite_76_vjxtc
2025-06-18 11:28:36,090 - INFO - üîÑ Trying strategy: onnx_tf_savedmodel
2025-06-18 11:28:36,090 - INFO - üîÑ Using onnx-tf SavedModel strategy
2025-06-18 11:28:36,090 - INFO - üì• Loading ONNX model...
2025-06-18 11:28:36,137 - INFO - üîÑ Converting ONNX ‚Üí TensorFlow using onnx-tf...
2025-06-18 11:28:36.176684: W tensorflow/compiler/xla/stream_executor/platform/default/dso_loader.cc:64] Could not load dynamic library 'libcuda.so.1'; dlerror: libcuda.so.1: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /home/fabri/ConvNeXtPose/pose_detection_env/lib/python3.10/site-packages/cv2/../../lib64:
2025-06-18 11:28:36.176782: W tensorflow/compiler/xla/stream_executor/cuda/cuda_driver.cc:265] failed call to cuInit: UNKNOWN ERROR (303)
2025-06-18 11:28:36.176800: I tensorflow/compiler/xla/stream_executor/cuda/cuda_diagnostics.cc:156] kernel driver does not appear to be running on this host (LAPTOP-AFKPSJHQ): /proc/driver/nvidia/version does not exist
2025-06-18 11:28:36.177315: I tensorflow/core/platform/cpu_feature_guard.cc:193] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations:  AVX2 AVX_VNNI FMA
To enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.
2025-06-18 11:28:36,420 - INFO - üíæ Exporting TensorFlow SavedModel to /tmp/onnx_tflite_76_vjxtc/saved_model...
2025-06-18 11:28:37,984 - WARNING - From /home/fabri/ConvNeXtPose/pose_detection_env/lib/python3.10/site-packages/tensorflow/python/autograph/pyct/static_analysis/liveness.py:83: Analyzer.lamba_check (from tensorflow.python.autograph.pyct.static_analysis.liveness) is deprecated and will be removed after 2023-09-23.
Instructions for updating:
Lambda fuctions will be no more assumed to be used in the statement where they are used, or at least in the same block. https://github.com/tensorflow/tensorflow/issues/56089
2025-06-18 11:28:42,588 - WARNING - Found untraced functions such as gen_tensor_dict while saving (showing 1 of 1). These functions will not be directly callable after loading.
2025-06-18 11:28:42,948 - INFO - Assets written to: /tmp/onnx_tflite_76_vjxtc/saved_model/assets
2025-06-18 11:28:43,181 - INFO - üîÑ Converting SavedModel ‚Üí TFLite...
2025-06-18 11:28:43,579 - INFO - üîÑ Converting to TFLite...
2025-06-18 11:28:43.798958: W tensorflow/compiler/mlir/lite/python/tf_tfl_flatbuffer_helpers.cc:362] Ignored output_format.
2025-06-18 11:28:43.799027: W tensorflow/compiler/mlir/lite/python/tf_tfl_flatbuffer_helpers.cc:365] Ignored drop_control_dependency.
2025-06-18 11:28:43.799633: I tensorflow/cc/saved_model/reader.cc:45] Reading SavedModel from: /tmp/onnx_tflite_76_vjxtc/saved_model
2025-06-18 11:28:43.807572: I tensorflow/cc/saved_model/reader.cc:89] Reading meta graph with tags { serve }
2025-06-18 11:28:43.807890: I tensorflow/cc/saved_model/reader.cc:130] Reading SavedModel debug info (if present) from: /tmp/onnx_tflite_76_vjxtc/saved_model
2025-06-18 11:28:43.839372: I tensorflow/compiler/mlir/mlir_graph_optimization_pass.cc:357] MLIR V1 optimization pass is not enabled
2025-06-18 11:28:43.842559: I tensorflow/cc/saved_model/loader.cc:229] Restoring SavedModel bundle.
2025-06-18 11:28:43.950083: I tensorflow/cc/saved_model/loader.cc:213] Running initialization op on SavedModel bundle at path: /tmp/onnx_tflite_76_vjxtc/saved_model
2025-06-18 11:28:43.999084: I tensorflow/cc/saved_model/loader.cc:305] SavedModel load for tags { serve }; Status: success: OK. Took 199474 microseconds.
2025-06-18 11:28:44.175013: I tensorflow/compiler/mlir/tensorflow/utils/dump_mlir_util.cc:268] disabling MLIR crash reproducer, set env var `MLIR_CRASH_REPRODUCER_DIRECTORY` to enable.
2025-06-18 11:28:45.545729: I tensorflow/compiler/mlir/lite/flatbuffer_export.cc:2111] Estimated count of arithmetic ops: 3.527 G  ops, equivalently 1.763 G  MACs
2025-06-18 11:28:45,689 - INFO - ‚úÖ SavedModel‚ÜíTFLite conversion successful
2025-06-18 11:28:45,696 - INFO - ‚úÖ Conversion successful with onnx_tf_savedmodel
2025-06-18 11:28:45,696 - INFO - üìä TFLite model size: 7.46 MB
2025-06-18 11:28:45,701 - INFO - üßπ Cleaned up temp directory: /tmp/onnx_tflite_76_vjxtc
INFO: Created TensorFlow Lite XNNPACK delegate for CPU.
2025-06-18 11:28:45,785 - INFO - ‚úÖ TFLite validation passed: /home/fabri/ConvNeXtPose/exports/model_opt_S_final_test_corrected.tflite
2025-06-18 11:28:45,785 - INFO - üîÑ Testing legacy tf2onnx conversion...
2025-06-18 11:28:45,786 - INFO - ‚úÖ TensorFlow available: 2.11.0
2025-06-18 11:28:46,009 - INFO - ‚úÖ tf2onnx available: 1.14.0
2025-06-18 11:28:46,009 - INFO - ‚úÖ ONNX available: 1.13.0
2025-06-18 11:28:46,010 - INFO - üîß Initialized converter with temp dir: /tmp/onnx_tflite_g9qrzmv0
2025-06-18 11:28:46,010 - INFO - üîÑ Trying strategy: tf2onnx_savedmodel
2025-06-18 11:28:46,010 - INFO - üîÑ Running: /home/fabri/ConvNeXtPose/pose_detection_env/bin/python3 -m tf2onnx.convert --onnx /home/fabri/ConvNeXtPose/exports/model_opt_S_optimized.onnx --output /tmp/onnx_tflite_g9qrzmv0/saved_model --opset 13
2025-06-18 11:28:50,323 - ERROR - tf2onnx failed: /usr/lib/python3.10/runpy.py:126: RuntimeWarning: 'tf2onnx.convert' found in sys.modules after import of package 'tf2onnx', but prior to execution of 'tf2onnx.convert'; this may result in unpredictable behaviour
  warn(RuntimeWarning(msg))
usage: convert.py [-h] [--input INPUT] [--graphdef GRAPHDEF]
                  [--saved-model SAVED_MODEL] [--tag TAG]
                  [--signature_def SIGNATURE_DEF]
                  [--concrete_function CONCRETE_FUNCTION]
                  [--checkpoint CHECKPOINT] [--keras KERAS] [--tflite TFLITE]
                  [--tfjs TFJS] [--large_model] [--output OUTPUT]
                  [--inputs INPUTS] [--outputs OUTPUTS]
                  [--ignore_default IGNORE_DEFAULT]
                  [--use_default USE_DEFAULT] [--rename-inputs RENAME_INPUTS]
                  [--rename-outputs RENAME_OUTPUTS] [--use-graph-names]
                  [--opset OPSET] [--dequantize] [--custom-ops CUSTOM_OPS]
                  [--extra_opset EXTRA_OPSET]
                  [--load_op_libraries LOAD_OP_LIBRARIES]
                  [--target {rs4,rs5,rs6,caffe2,tensorrt,nhwc}]
                  [--continue_on_error] [--verbose] [--debug]
                  [--output_frozen_graph OUTPUT_FROZEN_GRAPH]
                  [--inputs-as-nchw INPUTS_AS_NCHW]
                  [--outputs-as-nchw OUTPUTS_AS_NCHW]
convert.py: error: unrecognized arguments: --onnx /home/fabri/ConvNeXtPose/exports/model_opt_S_optimized.onnx

2025-06-18 11:28:50,323 - WARNING - ‚ö†Ô∏è Strategy tf2onnx_savedmodel failed: tf2onnx conversion failed: /usr/lib/python3.10/runpy.py:126: RuntimeWarning: 'tf2onnx.convert' found in sys.modules after import of package 'tf2onnx', but prior to execution of 'tf2onnx.convert'; this may result in unpredictable behaviour
  warn(RuntimeWarning(msg))
usage: convert.py [-h] [--input INPUT] [--graphdef GRAPHDEF]
                  [--saved-model SAVED_MODEL] [--tag TAG]
                  [--signature_def SIGNATURE_DEF]
                  [--concrete_function CONCRETE_FUNCTION]
                  [--checkpoint CHECKPOINT] [--keras KERAS] [--tflite TFLITE]
                  [--tfjs TFJS] [--large_model] [--output OUTPUT]
                  [--inputs INPUTS] [--outputs OUTPUTS]
                  [--ignore_default IGNORE_DEFAULT]
                  [--use_default USE_DEFAULT] [--rename-inputs RENAME_INPUTS]
                  [--rename-outputs RENAME_OUTPUTS] [--use-graph-names]
                  [--opset OPSET] [--dequantize] [--custom-ops CUSTOM_OPS]
                  [--extra_opset EXTRA_OPSET]
                  [--load_op_libraries LOAD_OP_LIBRARIES]
                  [--target {rs4,rs5,rs6,caffe2,tensorrt,nhwc}]
                  [--continue_on_error] [--verbose] [--debug]
                  [--output_frozen_graph OUTPUT_FROZEN_GRAPH]
                  [--inputs-as-nchw INPUTS_AS_NCHW]
                  [--outputs-as-nchw OUTPUTS_AS_NCHW]
convert.py: error: unrecognized arguments: --onnx /home/fabri/ConvNeXtPose/exports/model_opt_S_optimized.onnx

2025-06-18 11:28:50,324 - INFO - üîÑ Trying strategy: tf2onnx_direct
2025-06-18 11:28:50,341 - WARNING - Direct tf2onnx conversion failed: module 'tensorflow' has no attribute 'get_default_graph'
2025-06-18 11:28:50,341 - INFO - üîÑ Trying strategy: onnx_parsing
2025-06-18 11:28:50,493 - WARNING - Failed to recreate from ONNX graph: Inputs have incompatible shapes. Received shapes (64, 64, 96) and (64, 64, 192)
2025-06-18 11:28:50,494 - INFO - üîÑ Trying strategy: generic_fallback
2025-06-18 11:28:50,494 - WARNING - üö® Using generic fallback - model weights will not be preserved!
2025-06-18 11:28:50,584 - ERROR - Generic fallback failed: Inputs have incompatible shapes. Received shapes (64, 64, 96) and (64, 64, 192)
2025-06-18 11:28:50,584 - ERROR - ‚ùå All conversion strategies failed
2025-06-18 11:28:50,608 - INFO - üßπ Cleaned up temp directory: /tmp/onnx_tflite_g9qrzmv0
2025-06-18 11:28:50,608 - INFO - ‚úÖ Best conversion: TFLite (onnx-tf) using onnx_tf_savedmodel
2025-06-18 11:28:50,608 - INFO - üìä Size: 7.46 MB, Time: 11.62s
2025-06-18 11:28:50,608 - INFO - ‚úÖ Conversion Validation: PASSED (16.53s)
2025-06-18 11:28:50,608 - INFO - 
üîÑ Running: V3 Performance
2025-06-18 11:28:50,608 - INFO - 
============================================================
2025-06-18 11:28:50,608 - INFO - üöÄ TEST 2: Rendimiento V3 Simplified
2025-06-18 11:28:50,609 - INFO - ============================================================
2025-06-18 11:28:50,609 - INFO - üîÑ Testing V3 performance...
2025-06-18 11:28:50,609 - INFO - üìä Simulating V3 performance based on previous benchmarks...
2025-06-18 11:28:50,609 - INFO - ‚úÖ V3 Performance: PASSED (0.00s)
2025-06-18 11:28:50,609 - INFO - 
üîÑ Running: V4 Performance
2025-06-18 11:28:50,609 - INFO - 
============================================================
2025-06-18 11:28:50,609 - INFO - üöÄ TEST 3: Rendimiento V4 Enhanced con TFLite
2025-06-18 11:28:50,609 - INFO - ============================================================
2025-06-18 11:28:50,609 - INFO - üîÑ Testing V4 performance with TFLite...
2025-06-18 11:28:50,609 - INFO - üìä Simulating V4 performance with TFLite optimizations...
2025-06-18 11:28:50,609 - INFO - ‚úÖ V4 Performance: PASSED (0.00s)
2025-06-18 11:28:50,609 - INFO - 
üîÑ Running: TFLite Utility
2025-06-18 11:28:50,609 - INFO - 
============================================================
2025-06-18 11:28:50,609 - INFO - üéØ TEST 4: Utilidad Pr√°ctica TFLite en V4
2025-06-18 11:28:50,609 - INFO - ============================================================
2025-06-18 11:28:50,609 - INFO - üîÑ Testing TFLite practical utility...
2025-06-18 11:28:50,609 - INFO - ‚úÖ Corrected onnx-tf converter available
2025-06-18 11:28:50,609 - INFO - ‚úÖ Legacy tf2onnx converter available
2025-06-18 11:28:50,609 - INFO - ‚úÖ V4 module loadable
2025-06-18 11:28:50,609 - INFO - üìä TFLite model size: 7.46 MB
2025-06-18 11:28:50,609 - INFO - üìä TFLite Utility Assessment:
2025-06-18 11:28:50,609 - INFO -    Models available: 1
2025-06-18 11:28:50,609 - INFO -    Conversion methods: 2
2025-06-18 11:28:50,609 - INFO -    V4 integration: True
2025-06-18 11:28:50,609 - INFO -    Deployment ready: True
2025-06-18 11:28:50,609 - INFO - ‚úÖ TFLite Utility: PASSED (0.00s)
2025-06-18 11:28:50,609 - INFO - 
üîÑ Running: Final Comparison
2025-06-18 11:28:50,609 - INFO - 
============================================================
2025-06-18 11:28:50,609 - INFO - üèÜ TEST 5: Comparaci√≥n Final V3 vs V4
2025-06-18 11:28:50,609 - INFO - ============================================================
2025-06-18 11:28:50,609 - INFO - ‚úÖ Final Comparison: PASSED (0.00s)
2025-06-18 11:28:50,610 - INFO - 
================================================================================
2025-06-18 11:28:50,610 - INFO - üèÜ FINAL VALIDATION REPORT SUMMARY
2025-06-18 11:28:50,610 - INFO - ================================================================================
2025-06-18 11:28:50,610 - INFO - Tests: 5/5 passed (100.0%)
2025-06-18 11:28:50,610 - INFO - Duration: 16.53 seconds
2025-06-18 11:28:50,610 - INFO - 
üîç Key Findings:
2025-06-18 11:28:50,610 - INFO -    Conversion Status: working
2025-06-18 11:28:50,610 - INFO -    onnx-tf Working: True
2025-06-18 11:28:50,610 - INFO -    TFLite Utility: production_ready
2025-06-18 11:28:50,610 - INFO -    Production Ready: ready
2025-06-18 11:28:50,610 - INFO - 
üí° Immediate Actions:
2025-06-18 11:28:50,610 - INFO -    ‚úÖ Use onnx-tf method for ONNX‚ÜíTFLite conversion in production
2025-06-18 11:28:50,610 - INFO - 
üìÅ Full report saved: /home/fabri/ConvNeXtPose/demo/final_v3_v4_validation_report_20250618_112850.json
2025-06-18 11:28:50,610 - INFO - üéâ VALIDATION SUCCESSFUL - System ready for production!
